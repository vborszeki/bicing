(this.webpackJsonpbicing=this.webpackJsonpbicing||[]).push([[0],{23:function(e){e.exports=JSON.parse('{"apiKey":"AIzaSyAjXi9K1EioyCx9fIgXN4uUQwCdSVHz_vM"}')},24:function(e){e.exports=JSON.parse('[{"elementType":"geometry","stylers":[{"color":"#f5f5f5"}]},{"elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"elementType":"labels.text.stroke","stylers":[{"color":"#f5f5f5"}]},{"featureType":"administrative.land_parcel","elementType":"labels.text.fill","stylers":[{"color":"#bdbdbd"}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#eeeeee"}]},{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#e5e5e5"}]},{"featureType":"poi.park","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]},{"featureType":"road","elementType":"geometry","stylers":[{"color":"#ffffff"}]},{"featureType":"road.arterial","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#dadada"}]},{"featureType":"road.highway","elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]},{"featureType":"transit.line","elementType":"geometry","stylers":[{"color":"#e5e5e5"}]},{"featureType":"transit.station","elementType":"geometry","stylers":[{"color":"#eeeeee"}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":"#c9c9c9"}]},{"featureType":"water","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]}]')},39:function(e,t,n){"use strict";n.r(t);var c,o,r,i,a,s,l,b,u,j,p,f,d,h,x,O,y,g,m,v,w,k,S,T,z,E,_,B=n(7),C=n.n(B),L=n(6),I=n(3),M=n(0),R=n(4),K=n(28),Z=n(23),J=n(24),N=n(9),U={station:{color:"#fa424c",opacity:.4,zIndex:1},bike:{color:"transparent",opacity:1,zIndex:0},location:{color:"#694ffe",opacity:1,zIndex:2},search:{color:"#1fbaf6"},selected:{color:"#ffbe30"}},D=R.b.div(c||(c=Object(I.a)(["\n  position: absolute;\n  width: ","px;\n  height: ","px;\n  left: ","px;\n  top: ","px;\n  border: 1px solid\n    ",";\n  border-radius: 50%;\n  background-color: ",";\n  opacity: ",";\n  z-index: ",";\n  cursor: pointer;\n"])),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size/-2}),(function(e){return e.size/-2}),(function(e){return e.selected?U.selected.color:"search"===e.type?U.search.color:"location"===e.type?U.location.color:U.station.color}),(function(e){return e.selected?U.selected.color:U[e.type].color}),(function(e){return U[e.type].opacity}),(function(e){return U[e.type].zIndex})),F=n(1),V=function(e){var t=e.stationInfo,n=e.selected,c=e.showElectricBikes;return!c||c&&t.ebikes>0?Object(F.jsx)(D,{type:"station",size:1.5*t.capacity,selected:n}):null},W=function(e){var t=e.stationInfo,n=e.selected,c=e.showElectricBikes?t.ebikes:t.mechanicalBikes+t.ebikes;return c>0?Object(F.jsx)(D,{type:"bike",size:1.5*c,selected:n}):null},A=function(e){var t=e.station,n=e.selected,c=e.setSelectedStation,o=e.showElectricBikes,r=Object(N.b)({config:{friction:3,tension:200},transform:"scale(1.1)",from:{transform:"scale(1)"}});return Object(F.jsxs)(N.a.div,{style:r,onClick:function(){c(t)},children:[Object(F.jsx)(V,{selected:n,stationInfo:t,showElectricBikes:o}),Object(F.jsx)(W,{selected:n,stationInfo:t,showElectricBikes:o})]})},H=function(){var e=Object(N.b)({config:{friction:0,tension:5},transform:"scale(1.1)",from:{transform:"scale(1)"}});return Object(F.jsx)(N.a.div,{style:e,children:Object(F.jsx)(D,{type:"location",size:"16"})})},P=function(){return Object(F.jsx)(D,{type:"search",size:"16"})},X=R.b.div(o||(o=Object(I.a)(["\n  height: 100vh;\n  width: 100%;\n"]))),q={styles:J,disableDefaultUI:!0,clickableIcons:!1,gestureHandling:"greedy"},Q=function(e){var t=e.center,n=e.zoom,c=e.stations,o=e.selectedStation,r=e.setSelectedStation,i=e.showLocation,a=e.location,s=e.searchLocation,l=e.showElectricBikes;return Object(F.jsx)(X,{children:Object(F.jsxs)(K.a,{bootstrapURLKeys:{key:Z.apiKey},center:t,zoom:n,options:q,children:[c&&c.map((function(e,t){return Object(F.jsx)(A,{station:e,lat:e.lat,lng:e.lng,selected:e===o,setSelectedStation:r,showElectricBikes:l},t)})),i&&Object(F.jsx)(H,{lat:a.lat,lng:a.lng}),s&&Object(F.jsx)(P,{lat:s.lat,lng:s.lng})]})})},$=R.b.div(r||(r=Object(I.a)(["\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n"]))),G=function(e){var t=e.onClose;return Object(F.jsx)($,{onClick:t,role:"button",children:Object(F.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",children:Object(F.jsx)("path",{d:"M 0,0 L 10,10 M 10,0 L 0,10",stroke:"#000",strokeWidth:"1",vectorEffect:"non-scaling-stroke"})})})},Y=R.b.div(i||(i=Object(I.a)(["\n  width: calc(100vw - 40px);\n  padding: 20px;\n  font-size: 16px;\n  position: absolute;\n  bottom: 0;\n  background-color: #fff;\n"]))),ee=R.b.div(a||(a=Object(I.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: top;\n"]))),te=R.b.h1(s||(s=Object(I.a)(["\n  font-size: 16px;\n  margin-top: 0;\n"]))),ne=R.b.div(l||(l=Object(I.a)(["\n  font-weight: 100;\n"]))),ce=R.b.a(b||(b=Object(I.a)(["\n  text-transform: uppercase;\n  float: right;\n  color: #00d390;\n  cursor: pointer;\n"]))),oe=function(e){var t=e.selectedStation,n=e.setSelectedStation,c=e.setShowTravelModeSelection;return Object(F.jsxs)(Y,{children:[Object(F.jsxs)(ee,{children:[Object(F.jsx)(te,{children:t.name}),Object(F.jsx)(G,{onClose:function(){return n(null)}})]}),Object(F.jsx)(ne,{children:"\ud83d\udd27 mechanical: ".concat(t.mechanicalBikes)}),Object(F.jsx)(ne,{children:"\u26a1\ufe0f electric: ".concat(t.ebikes)}),Object(F.jsx)(ne,{children:"\ud83c\udd93 spaces: ".concat(t.availableDocks)}),Object(F.jsx)(ce,{onClick:function(){return c(!0)},role:"button",children:"directions"})]})},re=n(8),ie=n.n(re),ae=n(14),se=n(17),le=R.b.div(u||(u=Object(I.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: #fff;\n"]))),be=R.b.div(j||(j=Object(I.a)(["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n"]))),ue=R.b.input(p||(p=Object(I.a)(["\n  font-family: 'Roboto', sans-serif;\n  font-size: 40px;\n  margin-top: 52px;\n  margin-left: 40px;\n  outline: none;\n  border: none;\n  caret-color: #000;\n}\n"]))),je=R.b.ul(f||(f=Object(I.a)(["\n  list-style-type: none;\n"]))),pe=R.b.li(d||(d=Object(I.a)(["\n  margin-bottom: 16px;\n  cursor: pointer;\n"]))),fe=R.b.span(h||(h=Object(I.a)(["\n  font-weight: 400;\n"]))),de=R.b.span(x||(x=Object(I.a)(["\n  font-weight: 100;\n"]))),he=R.b.div(O||(O=Object(I.a)(["\n  font-size: 40px;\n  display: flex;\n  justify-content: center;\n  margin-top: 52px;\n"]))),xe=function(e){var t=e.setShowSearch,n=e.setSearchLocation,c=e.setZoom,o=Object(se.a)({requestOptions:{location:new window.google.maps.LatLng({lat:41.39,lng:2.17}),radius:5e3},debounce:300}),r=o.value,i=o.suggestions,a=i.status,s=i.data,l=o.setValue,b="OK"===a,u="ZERO_RESULTS"===a,j=function(e){var o=e.description;return Object(ae.a)(ie.a.mark((function e(){var r,i,a,s;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(se.b)({address:o});case 3:return r=e.sent,e.next=6,Object(se.c)(r[0]);case 6:i=e.sent,a=i.lat,s=i.lng,n({lat:a,lng:s}),t(!1),c(17),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))};return Object(F.jsxs)(le,{children:[Object(F.jsx)(be,{children:Object(F.jsx)(G,{onClose:function(){return t(!1)}})}),Object(F.jsx)(ue,{type:"text",autoFocus:!0,placeholder:"search places",value:r,onChange:function(e){l(e.target.value)}}),b&&Object(F.jsx)(je,{children:s.map((function(e){var t=e.id,n=e.structured_formatting,c=n.main_text,o=n.secondary_text;return Object(F.jsxs)(pe,{onClick:j(e),children:[Object(F.jsx)(fe,{children:c})," ",Object(F.jsx)(de,{children:o})]},t)}))}),u&&Object(F.jsx)(he,{children:Object(F.jsx)("span",{role:"img","aria-label":"crying cat face",children:"\ud83d\ude3f"})})]})},Oe=R.b.div(y||(y=Object(I.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #fff;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  position: absolute;\n  bottom: 20px;\n  right: 20px;\n  cursor: pointer;\n"]))),ye=function(e){var t=e.setLocation,n=e.setZoom,c=e.setShowLocation,o=function(){var e=Object(ae.a)(ie.a.mark((function e(){var o,r,i,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}));case 3:o=e.sent,r=o.coords,i=r.latitude,a=r.longitude,t({lat:i,lng:a}),n(17),c(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(F.jsx)(Oe,{onClick:o,role:"button",children:Object(F.jsx)("span",{role:"img","aria-label":"locate",children:"\ud83d\udccc"})})},ge=R.b.div(g||(g=Object(I.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #fff;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  position: absolute;\n  bottom: 80px;\n  right: 20px;\n  cursor: pointer;\n"]))),me=function(e){var t=e.setShowSearch;return Object(F.jsx)(ge,{role:"button",onClick:function(){return t(!0)},children:Object(F.jsx)("span",{role:"img","aria-label":"search",children:"\ud83d\udd0d"})})},ve=R.b.div(m||(m=Object(I.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #fff;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  cursor: pointer;\n"]))),we=R.b.div(v||(v=Object(I.a)(["\n  transform: translate(10px);\n"]))),ke=R.b.div(w||(w=Object(I.a)(["\n  transform: translate(-10px);\n"]))),Se=function(e){var t=e.showElectricBikes,n=e.setShowElectricBikes,c=function(){return Object(F.jsx)("span",{role:"img","aria-label":"mechanical",children:"\ud83d\udd27"})},o=function(){return Object(F.jsx)("span",{role:"img","aria-label":"electric",children:"\u26a1\ufe0f"})};return Object(F.jsx)(ve,{role:"button",onClick:function(){n(!t)},children:t?Object(F.jsx)(o,{}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(we,{children:Object(F.jsx)(c,{})}),Object(F.jsx)(ke,{children:Object(F.jsx)(o,{})})]})})},Te=Object(R.b)(N.a.div)(k||(k=Object(I.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  height: -webkit-fill-available;\n  font-size: 60px;\n"]))),ze=function(){var e=Object(N.b)({config:{friction:0,tension:5},opacity:.5,from:{opacity:1}});return Object(F.jsx)(Te,{style:e,children:Object(F.jsx)("span",{role:"img","aria-label":"bike",children:"\ud83d\udeb2"})})},Ee=R.b.div(S||(S=Object(I.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  height: -webkit-fill-available;\n  background-color: #fff;\n"]))),_e=R.b.div(T||(T=Object(I.a)(["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n"]))),Be=R.b.div(z||(z=Object(I.a)(["\n  width: 100vw;\n  height: 100vh;\n  height: -webkit-fill-available;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Ce=R.b.a(E||(E=Object(I.a)(["\n  font-size: 60px;\n  margin-right: ",";\n  text-decoration: none;\n  cursor: pointer;\n"])),(function(e){return e.spacer?"52px":"0"})),Le=function(e){var t=e.selectedStation,n=t.lat,c=t.lng,o=e.setShowTravelModeSelection,r=function(e){return"https://www.google.com/maps/dir/?api=1&destination=".concat(n,"%2C").concat(c,"&travelmode=").concat(e)};return Object(F.jsxs)(Ee,{children:[Object(F.jsx)(_e,{children:Object(F.jsx)(G,{onClose:function(){return o(!1)}})}),Object(F.jsxs)(Be,{children:[Object(F.jsx)(Ce,{href:r("walking"),spacer:!0,children:Object(F.jsx)("span",{role:"img","aria-label":"walking",children:"\ud83d\udeb6\ud83c\udffb\u200d\u2642"})}),Object(F.jsx)(Ce,{href:r("bicycling"),children:Object(F.jsx)("span",{role:"img","aria-label":"biking",children:"\ud83d\udeb4\ud83c\udffb\u200d\u2642\ufe0f"})})]})]})},Ie=n(20),Me=function(){var e=Object(M.useState)([]),t=Object(L.a)(e,2),n=t[0],c=t[1];Object(M.useEffect)((function(){o()}),[]);var o=function(){var e=Object(ae.a)(ie.a.mark((function e(){var t,n,o,r,i,a,s;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.bsmsa.eu/ext/api/bsm/gbfs/v2/en/station_information");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,o=n.data.stations.map((function(e){return{id:e.station_id,name:e.name,lat:e.lat,lng:e.lon,capacity:e.capacity}})),e.next=10,fetch("https://api.bsmsa.eu/ext/api/bsm/gbfs/v2/en/station_status");case 10:return r=e.sent,e.next=13,r.json();case 13:i=e.sent,a=i.data.stations.map((function(e){return{id:e.station_id,mechanicalBikes:e.num_bikes_available_types.mechanical,ebikes:e.num_bikes_available_types.ebike,availableDocks:e.num_docks_available,status:e.status}})),s=o.map((function(e){return Object(Ie.a)(Object(Ie.a)({},a.find((function(t){return t.id===e.id}))),e)})).filter((function(e){return"IN_SERVICE"===e.status})),c(s),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return n},Re=Object(R.a)(_||(_=Object(I.a)(["\n  body {\n    margin: 0;\n    font-family: 'Roboto', sans-serif;\n  }\n  \n  #root {\n    height: 100vh;\n  }\n"]))),Ke=function(){var e=Me(),t=Object(M.useState)(null),n=Object(L.a)(t,2),c=n[0],o=n[1],r=Object(M.useState)(!1),i=Object(L.a)(r,2),a=i[0],s=i[1],l=Object(M.useState)(!1),b=Object(L.a)(l,2),u=b[0],j=b[1],p=Object(M.useState)(!1),f=Object(L.a)(p,2),d=f[0],h=f[1],x=Object(M.useState)({lat:41.39,lng:2.17}),O=Object(L.a)(x,2),y=O[0],g=O[1],m=Object(M.useState)(null),v=Object(L.a)(m,2),w=v[0],k=v[1],S=Object(M.useState)(null),T=Object(L.a)(S,2),z=T[0],E=T[1],_=Object(M.useState)(!1),B=Object(L.a)(_,2),C=B[0],I=B[1],R=Object(M.useState)(13.5),K=Object(L.a)(R,2),Z=K[0],J=K[1],N=0===e.length;return Object(M.useEffect)((function(){w&&g(w)}),[w]),Object(M.useEffect)((function(){z&&g(z)}),[z]),N?Object(F.jsx)(ze,{}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Q,{stations:e,selectedStation:c,setSelectedStation:o,center:y,zoom:Z,showLocation:a,location:w,searchLocation:z,showElectricBikes:C}),Object(F.jsx)(Se,{showElectricBikes:C,setShowElectricBikes:I}),Object(F.jsx)(me,{setShowSearch:j}),Object(F.jsx)(ye,{setLocation:k,setZoom:J,setShowLocation:s}),c&&Object(F.jsx)(oe,{selectedStation:c,setSelectedStation:o,setShowTravelModeSelection:h}),u&&Object(F.jsx)(xe,{setShowSearch:j,setSearchLocation:E,setZoom:J}),d&&Object(F.jsx)(Le,{selectedStation:c,setShowTravelModeSelection:h}),Object(F.jsx)(Re,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));C.a.render(Object(F.jsx)(Ke,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.fbb1c55e.chunk.js.map