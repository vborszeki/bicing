{"version":3,"sources":["Markers/Marker.js","Markers/Station.js","Markers/Bikes.js","Markers/StationInfo.js","Map/Map.js","Loader/Loader.js","App/useStations.js","App/App.js","serviceWorker.js","index.js"],"names":["Marker","styled","div","_templateObject","props","size","type","Station","_ref","stationInfo","react_default","a","createElement","Markers_Marker","capacity","Bikes","mechanicalBikes","ebikes","StationInfo","station","setSelectedStation","style","useSpring","config","friction","tension","transform","from","web","onClick","Markers_Station","Markers_Bikes","Wrapper","Map_templateObject","mapOptions","styles","mapStyles","disableDefaultUI","Map","center","zoom","stations","lib_default","bootstrapURLKeys","key","secretKeys","apiKey","defaultCenter","defaultZoom","options","map","i","Markers_StationInfo","lat","lng","lon","defaultProps","animated","Loader_templateObject","Loader","opacity","Loader_Wrapper","role","aria-label","useStations","_useState","useState","_useState2","Object","slicedToArray","setStations","useEffect","getStations","asyncToGenerator","regenerator_default","mark","_callee","stationInfoResponse","stationInfoData","stationStatusResponse","stationStatusData","stationStatus","stationsData","wrap","_context","prev","next","fetch","sent","json","data","id","station_id","name","num_bikes_available_types","mechanical","ebike","status","info","objectSpread","find","filter","t0","console","error","stop","apply","this","arguments","GlobalStyle","createGlobalStyle","App_templateObject","StationInfoWrapper","_templateObject2","App","selectedStation","isLoading","length","Fragment","src_Loader_Loader","Drawer","anchor","open","Boolean","onClose","Typography","variant","component","gutterBottom","concat","src_Map_Map","window","location","hostname","match","ReactDOM","render","src_App_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.89f040c8.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nconst Marker = styled.div`\n  position: absolute;\n  width: ${props => props.size}px;\n  height: ${props => props.size}px;\n  left: ${props => props.size / -2}px;\n  top: ${props => props.size / -2}px;\n  border: 1px solid #e91e63;\n  border-radius: ${props => props.size}px;\n  background-color: ${props =>\n    props.type === 'station' ? '#e91e63' : 'transparent'};\n  opacity: ${props => (props.type === 'station' ? 0.4 : 1)};\n  z-index: ${props => (props.type === 'station' ? 1 : 0)};\n  cursor: pointer;\n`;\n\nexport default Marker;\n","import React from 'react';\nimport Marker from './Marker';\n\nconst Station = ({ stationInfo }) => (\n  <Marker type=\"station\" size={stationInfo.capacity * 1.5} />\n);\n\nexport default Station;\n","import React from 'react';\nimport Marker from './Marker';\n\nconst Bikes = ({ stationInfo }) => {\n  const hasBikes = stationInfo.mechanicalBikes + stationInfo.ebikes > 0;\n\n  return hasBikes ? (\n    <Marker\n      type=\"bike\"\n      size={(stationInfo.mechanicalBikes + stationInfo.ebikes) * 1.5}\n    />\n  ) : null;\n};\n\nexport default Bikes;\n","import React from 'react';\nimport { useSpring, animated } from 'react-spring';\nimport Station from './Station';\nimport Bikes from './Bikes';\n\nconst StationInfo = ({ station, setSelectedStation }) => {\n  const style = useSpring({\n    config: { friction: 3, tension: 200 },\n    transform: 'scale(1.1)',\n    from: { transform: 'scale(1)' }\n  });\n\n  return (\n    <animated.div\n      style={style}\n      onClick={() => {\n        setSelectedStation(station);\n      }}\n    >\n      <Station stationInfo={station} />\n      <Bikes stationInfo={station} />\n    </animated.div>\n  );\n};\n\nexport default StationInfo;\n","import React from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport styled from 'styled-components';\nimport secretKeys from '../secrets.json';\nimport mapStyles from './mapStyles.json';\nimport StationInfo from '../Markers/StationInfo';\n\nconst Wrapper = styled.div`\n  height: 100vh;\n  width: 100%;\n`;\n\nconst mapOptions = {\n  styles: mapStyles,\n  disableDefaultUI: true\n};\n\nconst Map = props => {\n  const { center, zoom, stations, setSelectedStation } = props;\n\n  return (\n    <Wrapper>\n      <GoogleMapReact\n        bootstrapURLKeys={{ key: secretKeys.apiKey }}\n        defaultCenter={center}\n        defaultZoom={zoom}\n        options={mapOptions}\n      >\n        {stations &&\n          stations.map((station, i) => (\n            <StationInfo\n              key={i}\n              station={station}\n              lat={station.lat}\n              lng={station.lon}\n              setSelectedStation={setSelectedStation}\n            />\n          ))}\n      </GoogleMapReact>\n    </Wrapper>\n  );\n};\n\nMap.defaultProps = {\n  center: {\n    lat: 41.39,\n    lng: 2.17\n  },\n  zoom: 13.5\n};\n\nexport default Map;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSpring, animated } from 'react-spring';\n\nconst Wrapper = styled(animated.div)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  font-size: 60px;\n`;\n\nconst Loader = () => {\n  const style = useSpring({\n    config: { friction: 0, tension: 5 },\n    opacity: 0.5,\n    from: { opacity: 1 }\n  });\n\n  return (\n    <Wrapper style={style}>\n      <span role=\"img\" aria-label=\"bike\">\n        🚲\n      </span>\n    </Wrapper>\n  );\n};\n\nexport default Loader;\n","import { useState, useEffect } from 'react';\n\nconst useStations = () => {\n  const [stations, setStations] = useState([]);\n\n  useEffect(() => {\n    getStations();\n  }, []);\n\n  const getStations = async () => {\n    try {\n      const stationInfoResponse = await fetch(\n        'https://api.bsmsa.eu/ext/api/bsm/gbfs/v2/en/station_information'\n      );\n      const stationInfoData = await stationInfoResponse.json();\n      const stationInfo = stationInfoData.data.stations.map(station => ({\n        id: station.station_id,\n        name: station.name,\n        lat: station.lat,\n        lon: station.lon,\n        capacity: station.capacity\n      }));\n\n      const stationStatusResponse = await fetch(\n        'https://api.bsmsa.eu/ext/api/bsm/gbfs/v2/en/station_status'\n      );\n      const stationStatusData = await stationStatusResponse.json();\n      const stationStatus = stationStatusData.data.stations.map(station => ({\n        id: station.station_id,\n        mechanicalBikes: station.num_bikes_available_types.mechanical,\n        ebikes: station.num_bikes_available_types.ebike,\n        status: station.status\n      }));\n\n      const stationsData = stationInfo\n        .map(info => ({\n          ...stationStatus.find(status => status.id === info.id),\n          ...info\n        }))\n        .filter(station => station.status === 'IN_SERVICE');\n\n      setStations(stationsData);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return stations;\n};\n\nexport default useStations;\n","import React, { useState } from 'react';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport Drawer from '@material-ui/core/Drawer';\nimport Typography from '@material-ui/core/Typography';\nimport Map from '../Map/Map';\nimport Loader from '../Loader/Loader';\nimport useStations from './useStations';\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    margin: 0;\n  }\n`;\n\nconst StationInfoWrapper = styled.div`\n  padding: 20px;\n`;\n\nconst App = () => {\n  const [selectedStation, setSelectedStation] = useState(null);\n  const stations = useStations();\n  const isLoading = stations.length === 0;\n\n  return (\n    <>\n      {isLoading ? (\n        <Loader />\n      ) : (\n        <>\n          <Drawer\n            anchor=\"bottom\"\n            open={Boolean(selectedStation)}\n            onClose={() => setSelectedStation(null)}\n          >\n            {selectedStation && (\n              <StationInfoWrapper>\n                <Typography variant=\"subtitle1\" component=\"h1\" gutterBottom>\n                  {selectedStation.name}\n                </Typography>\n                <Typography component=\"p\">\n                  {`🔧 mechanical: ${selectedStation.mechanicalBikes}`}\n                </Typography>\n                <Typography component=\"p\">\n                  {`⚡️ electric: ${selectedStation.ebikes}`}\n                </Typography>\n                <Typography component=\"p\">\n                  {`🆓 spaces: ${selectedStation.capacity -\n                    selectedStation.mechanicalBikes -\n                    selectedStation.ebikes}`}\n                </Typography>\n              </StationInfoWrapper>\n            )}\n          </Drawer>\n          <Map stations={stations} setSelectedStation={setSelectedStation} />\n        </>\n      )}\n      <GlobalStyle />\n    </>\n  );\n};\n\nexport default App;\n","const isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    window.location.hostname === '[::1]' ||\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        checkValidServiceWorker(swUrl, config);\n\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              console.log('Content is cached for offline use.');\n\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  fetch(swUrl)\n    .then(response => {\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}